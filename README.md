# HighlightJS 代码高亮插件

一个支持深色模式的 Typecho 代码高亮插件，基于 highlight.js 实现。

## 功能特点

- 🎨 支持明暗主题切换
- ⚡ 自动检测深色模式变化
- 🎯 可自定义主题样式

## 安装方法

1. 下载本插件
2. 将插件上传到 `/usr/plugins/` 目录下
3. 将插件文件夹重命名为 `HighlightJS`
4. 在 Typecho 后台启用插件

## 配置说明

### 基础配置

- **是否启用深色模式**：选择是否支持明暗主题切换
- **深色模式判断表达式**：用于判断当前是否为深色模式的 JavaScript 表达式
  - 默认值：`document.documentElement.classList.contains("dark")`
  - 可根据您的主题定制，例如：
    ```javascript
    document.documentElement.getAttribute("data-theme") === "dark";
    ```

### 高级配置

- **深色模式监听属性**：监听哪些 HTML 属性的变化来触发主题切换

  - 默认值：`class`
  - 多个属性用逗号分隔

- **自定义主题**：
  - **浅色主题 CSS 链接**：自定义浅色主题的 CSS 文件地址
  - **深色主题 CSS 链接**：自定义深色主题的 CSS 文件地址
  - 留空则使用默认主题（atom-one-light/dark）

## 使用方法

1. 在文章中插入代码块：

2. 发布文章后，代码块将自动高亮显示

3. 如果您的主题支持深色模式，代码高亮将自动跟随主题切换

## 常见问题

### 深色模式不生效？

1. 检查"深色模式判断表达式"是否与您的主题匹配
2. 确认"深色模式监听属性"包含了主题切换时会变化的属性
3. 在浏览器控制台检查深色模式切换时 HTML 元素的属性变化

### 代码高亮样式不符合预期？

1. 确认插件已正确安装并启用
2. 检查是否有其他代码高亮插件造成冲突
3. 尝试清除浏览器缓存

## 自定义主题

如需使用自定义主题，您可以：

1. 访问 [highlight.js 样式库](https://highlightjs.org/demo/)
2. 选择喜欢的主题,在 [cdnjs](https://cdnjs.com/libraries/highlight.js/) 中搜索主题名称并复制 CSS 文件地址
3. 在插件设置中填入对应的 CSS 文件地址

## 更新日志

### 1.0.0

- 初始版本发布
- 支持明暗主题自动切换
- 添加过渡动画效果
- 支持自定义主题配置

## 技术支持

如有问题或建议，请访问 [项目主页](https://github.com/nobu121/typecho-highlightjs) 提交 Issue。

## 许可证

本插件采用 MIT 许可证开源。
